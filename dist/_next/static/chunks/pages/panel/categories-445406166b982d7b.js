(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{48965:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/categories",function(){return c(63311)}])},63311:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return R}});var d=c(47568),e=c(14924),f=c(10797),g=c(34051),h=c.n(g),i=c(85893),j=c(9669),k=c.n(j),l=c(67294),m=c(82668),n=c(2072),o=c(92456),p=c(57632),q=c(7641),r=c(94184),s=c.n(r),t=c(14212),u=c(75758),v=function(a){var b=a.category,c=a.reload,e=(0,l.useState)(!1),f=e[0],g=e[1],j=function(){g(function(a){return!a})},k=function(a){var b,e=(0,p.Z)();u.eventManager.emit("categories:edit",a,e),u.eventManager.once("categories:edit:response:".concat(e),(b=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!b){a.next=3;break}return a.next=3,c();case 3:case"end":return a.stop()}},a)})),function(a){return b.apply(this,arguments)}))};return(0,i.jsxs)("div",{className:"shadow-main flex flex-col rounded-[10px] bg-white pt-[15px] px-[15px] pb-[0px]",children:[(0,i.jsxs)("div",{className:"flex cursor-pointer select-none items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-[9px]",children:[(0,i.jsx)("img",{alt:"Category",className:"h-[20px] border rounded-[5px] overflow-hidden w-[20px]",src:"/cdn/".concat(b.image)}),(0,i.jsx)("button",{type:"button",onClick:function(){k(b._id)},className:"py-[1px] px-[6px] hover:bg-gray-50 rounded-main/2",children:(0,i.jsx)("h2",{className:"font-[600] text-[16px]",children:b.name})})]}),(0,i.jsx)("button",{onClick:j,className:"outline-none flex-grow flex justify-end",children:(0,i.jsx)(t.Z,{name:"chevronUp",className:s()(!f&&"rotate-[180deg] transform","stroke-[#6E5AD1] fill-transparent transition-all")})})]}),(0,i.jsxs)("div",{className:s()(f?"h-auto opacity-[1] pt-[20px] visible":"h-0 opacity-0 invisible","flex flex-wrap transition-all duration-[100ms] mt-[15px] border-t"),children:[0==b.sub_categories.length&&(0,i.jsx)("h1",{className:"pb-[20px] text-center w-full transition-all duration-[100ms] text-gray-400 italic",children:"Not found sub category"}),b.sub_categories.map(function(a,b){return(0,i.jsx)("button",{type:"button",onClick:function(){k(a._id)},className:s()(f?"visible opacity-[1]":"invisible opacity-0","font-[400] hover:text-primary transition-all duration-[100ms] mb-[20px] px-[15px] text-[16px] text-[#555555]"),children:a.name},"sub-category-key-".concat(b))})]})]})},w=c(26042),x=c(69396),y=c(65791),z=c(87536),A=c(74634),B=c(32130),C=l.forwardRef(function(a,b){var c=a.checked,d=a.onChange,e=a.label,f=(0,l.useState)(!1),g=f[0],h=f[1],j=function(){h(function(a){return null==d||d(!a),!a})};return(0,l.useEffect)(function(){void 0!=c&&h(c)},[c]),(0,i.jsxs)("div",{onClick:j,className:"flex cursor-pointer items-center space-x-[10px]",children:[(0,i.jsx)("div",{className:s()("w-6 h-6 rounded-main/2 bg-white flex justify-center items-center border-2 border-primary"),children:(0,i.jsx)("div",{className:s()(g&&"visible opacity-1 scale-[1]",!g&&"invisible opacity-0 scale-[0]","w-3 h-3 transition-all duration-300 rounded-[3px] bg-primary")})}),(0,i.jsx)("label",{className:"text-[16px] cursor-pointer select-none text-gray-800",children:e})]})}),D=function(){var a,b=(0,l.useState)(!1),c=b[0],f=b[1],g=(0,l.useState)(!1),j=g[0],m=g[1],o=(0,l.useState)(null),p=o[0],q=o[1],r=(0,z.cI)(),s=r.handleSubmit,t=r.control,v=r.reset,D=r.formState.errors;r.setError,r.clearErrors,r.setValue;var E=(a=(0,d.Z)(h().mark(function a(b){var c,d,f;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c={en:b.nameEn.trim(),tm:b.nameTm.trim(),ru:b.nameRu.trim(),tr:b.nameTr.trim()},d=b.contents,m(!0),a.prev=3,a.next=6,k().post("/api/v1/attributes",{name:c,units:d,is_number:b.isNumber},{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0)});case 6:if(!0!==(f=a.sent).data.isSuccess){a.next=12;break}return u.eventManager.emit("categories:attributes:add:response:".concat(p),!0),G(),m(!1),a.abrupt("return");case 12:throw Error("failed to add new attribute");case 15:a.prev=15,a.t0=a.catch(3),console.log("[add] - error -",a.t0),m(!1);case 19:case"end":return a.stop()}},a,null,[[3,15]])})),function(b){return a.apply(this,arguments)}),F=function(a){q(a),f(!0)},G=function(){f(!1),m(!1),v()};return(0,l.useEffect)(function(){return u.eventManager.on("categories:attributes:add",F),function(){u.eventManager.off("categories:attributes:add",F)}},[]),(0,i.jsx)(y.Z,{title:"Add Attribute",visible:c,onClose:G,modalBox:function(a){return(0,i.jsx)("form",{onSubmit:s(E),children:a})},useClassicContainer:!0,tools:(0,i.jsx)(n.z,{size:"small",loading:j,type:"submit",children:"Add"}),children:(0,i.jsxs)("div",{className:"flex flex-col space-y-[20px]",children:[(0,i.jsxs)(A.sp,{label:"Name:",children:[(0,i.jsx)(z.Qr,{control:t,name:"nameEn",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"English"}))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!==D.nameEn}),(0,i.jsx)(z.Qr,{control:t,name:"nameRu",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"Ruskiy"}))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!==D.nameRu}),(0,i.jsx)(z.Qr,{control:t,name:"nameTm",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"Turkmence"}))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!==D.nameTm}),(0,i.jsx)(z.Qr,{control:t,name:"nameTr",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"Turkce"}))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!==D.nameTr})]}),(0,i.jsx)(z.Qr,{control:t,name:"contents",render:function(a){var b=a.field;return(0,i.jsx)(A.sp,{label:"Contents:",children:(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"Example: Mb, Gb, Bit, Byte"}))})}}),(0,i.jsx)(z.Qr,{control:t,name:"isNumber",render:function(a){var b=a.field;return(0,i.jsx)(C,(0,x.Z)((0,w.Z)({label:"Is number"},b),{checked:b.value}))}})]})})},E=c(71767),F=c(78119),G=function(){var a,b,c=(0,l.useState)(!1),g=c[0],j=c[1],m=(0,l.useState)(!1),n=m[0],o=m[1],p=(0,l.useState)([]),q=p[0],r=p[1],v=(0,l.useState)(null),w=v[0],x=v[1],z=(0,l.useState)(!1),A=z[0],C=z[1],D=(0,l.useState)(0),G=D[0],H=D[1],I=(0,l.useState)([]),J=I[0],K=I[1],L=(a=(0,d.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o(!0),a.prev=1,c=!0===b?0:G,a.next=5,k().get("/api/v1/categories",{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0),params:{limit:10,page:c}});case 5:if(!0!==(d=a.sent).data.isSuccess){a.next=12;break}return H(c+1),r(!0===b?d.data.result:(0,f.Z)(q).concat((0,f.Z)(d.data.result))),C(d.data.result.length<10),o(!1),a.abrupt("return");case 12:throw Error("failed to load categories");case 15:a.prev=15,a.t0=a.catch(1),console.log("[loadCategories] - error -",a.t0),o(!1);case 19:case"end":return a.stop()}},a,null,[[1,15]])})),function(b){return a.apply(this,arguments)}),M=function(a){var b={_id:a._id,image:a.image,name:a.name};u.eventManager.emit("categories:select:parent:response:".concat(w),b),O()},N=(b=(0,d.Z)(h().mark(function a(b){var c,d=arguments;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=d.length>1&& void 0!==d[1]?d[1]:[],x(b),K(c),j(!0),a.next=6,L(!0);case 6:case"end":return a.stop()}},a)})),function(a){return b.apply(this,arguments)}),O=function(){j(!1),x(null),r([]),H(0),C(!0),K([]),o(!1)};return(0,l.useEffect)(function(){return u.eventManager.on("categories:select:parent",N),function(){u.eventManager.off("categories:select:parent",N)}},[]),(0,i.jsxs)(y.Z,{title:"Select Category",useClassicContainer:!0,onClose:O,contentLoading:0===q.length&&n,visible:g,children:[(0,i.jsx)("div",{className:"flex flex-col divide-y-2",children:q.map(function(a,b){var c=void 0!==J.find(function(b){return b===a._id});return(0,i.jsxs)("button",{disabled:c,onClick:function(){M(a)},className:s()(c&&"bg-gray-50/50 text-black/50",!c&&"hover:bg-gray-50","flex items-center transition-all duration-[300ms] py-[15px] justify-between"),children:[(0,i.jsxs)("div",{className:"flex items-center space-x-[15px]",children:[(0,i.jsx)("img",{src:"/cdn/".concat(a.image),className:"w-[20px] h-[20px]"}),(0,i.jsx)("h3",{className:"font-[600] text-[16px]",children:a.name})]}),!c&&(0,i.jsx)(t.Z,{name:"chevronDown",className:"rotate-[-90deg]"})]},"category-index-".concat(b))})}),(0,i.jsx)(F.n,{show:!A&&0!==q.length,loading:n,onClick:L}),(0,i.jsx)(E.z,{show:0===q.length&&!n,children:"Not found category"})]})},H=c(50975),I=function(){var a,b=(0,l.useState)(!1),c=b[0],f=b[1],g=(0,l.useState)(!1),j=g[0],m=g[1],o=(0,l.useState)(null),q=o[0],r=o[1],s=(0,z.cI)({}),v=s.control,x=s.clearErrors,C=s.reset,D=s.setError,E=s.unregister,F=(s.trigger,s.setValue),G=s.getValues,I=s.handleSubmit,K=s.formState.errors,L=l.createRef(),M=(a=(0,d.Z)(h().mark(function a(b){var c,d,f;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.nameTm=b.nameTm.trim(),b.nameEn=b.nameEn.trim(),b.nameRu=b.nameRu.trim(),b.nameTr=b.nameTr.trim(),b.parent){a.next=11;break}if(b.attributes=void 0,b.icon){a.next=9;break}return D("icon",{type:"required"}),a.abrupt("return");case 9:a.next=12;break;case 11:b.icon=void 0;case 12:if(m(!0),a.prev=13,console.log("values: ".concat(b.icon)),(c=new FormData).append("name.tm",b.nameTm),c.append("name.en",b.nameEn),c.append("name.ru",b.nameRu),c.append("name.tr",b.nameTr),b.parent&&c.append("parent",b.parent._id),b.icon&&c.append("image",b.icon),b.attributes)for(d=0;d<b.attributes.length;d++)c.append("attributes",b.attributes[d]._id);return a.next=25,k().post("/api/v1/categories",c,{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0)});case 25:if(f=a.sent,console.log(f),!0!==f.data.isSuccess){a.next=32;break}return u.eventManager.emit("categories:add:response:".concat(q),!0),O(),m(!1),a.abrupt("return");case 32:throw Error("failed to add new category");case 35:a.prev=35,a.t0=a.catch(13),console.log("[addCategory] - error -",a.t0),m(!1);case 39:case"end":return a.stop()}},a,null,[[13,35]])})),function(b){return a.apply(this,arguments)}),N=function(a){f(!0),r(a)},O=function(){f(!1),r(null),C(),m(!1)};return(0,l.useEffect)(function(){return u.eventManager.on("categories:add",N),function(){u.eventManager.off("categories:add",N)}},[]),(0,i.jsx)(y.Z,{title:"Add Category",onClose:O,visible:c,useClassicContainer:!0,tools:(0,i.jsx)(n.z,{type:"submit",size:"small",loading:j,children:"Add"}),modalBox:function(a){return(0,i.jsx)("form",{onSubmit:I(M),children:a})},children:(0,i.jsxs)("div",{className:"flex flex-col space-y-[20px]",children:[(0,i.jsxs)(A.sp,{label:"Name:",children:[(0,i.jsx)(z.Qr,{control:v,name:"nameEn",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,w.Z)({className:"w-full",iserror:void 0!=K.nameEn,placeholder:"English"},b))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=K.nameEn}),(0,i.jsx)(z.Qr,{control:v,name:"nameRu",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,w.Z)({className:"w-full",iserror:void 0!=K.nameEn,placeholder:"Ruskiy"},b))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=K.nameRu}),(0,i.jsx)(z.Qr,{control:v,name:"nameTm",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,w.Z)({className:"w-full",iserror:void 0!=K.nameEn,placeholder:"Turkmence"},b))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=K.nameTm}),(0,i.jsx)(z.Qr,{control:v,name:"nameTr",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,w.Z)({className:"w-full",iserror:void 0!=K.nameEn,placeholder:"Turkce"},b))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=K.nameTr})]}),(0,i.jsx)(z.Qr,{control:v,name:"parent",render:function(a){var b,c=a.field;return(0,i.jsxs)("div",{className:"space-y-[20px]",children:[(0,i.jsx)(A.sp,{label:"Subcategory of:",children:(0,i.jsxs)("div",{className:"flex items-center relative",children:[(0,i.jsx)(A.JD,{value:null===(b=c.value)|| void 0===b?void 0:b.name,notSelectedValue:"Not Selected",onClick:function(){var a=(0,p.Z)();u.eventManager.emit("categories:select:parent",a,c.value?[c.value._id]:[]),u.eventManager.once("categories:select:parent:response:".concat(a),function(a){F("parent",a),E("icon")})},render:function(a){var b;return(0,i.jsxs)("div",{className:"flex items-center space-x-[10px]",children:[(0,i.jsx)("img",{src:"/cdn/".concat(null===(b=c.value)|| void 0===b?void 0:b.image),className:"rounded-main/2 border bg-white border-[#E5E5E5] w-[20px] h-[20px]"}),(0,i.jsx)("span",{className:"font-[500] text-[15.5px]",children:a})]})}}),c.value&&(0,i.jsx)("button",{type:"button",className:"absolute right-[10px]",onClick:function(){F("parent",null),E("attributes")},children:(0,i.jsx)(t.Z,{name:"close",size:12})})]})}),c.value&&(0,i.jsx)(J,{getValues:G,control:v}),!c.value&&(0,i.jsx)(z.Qr,{control:v,name:"icon",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsxs)(A.sp,{error:void 0!=K.icon,label:"Icon:",children:[(0,i.jsx)(H.j,{ref:L,onClick:function(){var a;null===(a=L.current)|| void 0===a||a.click()},image:b.value&&URL.createObjectURL(b.value),onChange:function(a){if(a.target.value){var b=a.target.files[0];b&&(F("icon",b),x("icon"))}},height:"75px",width:"75px"}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=K.icon})]})}})]})}})]})})},J=function(a){var b=a.control;a.getValues;var c=(0,z.Dq)({control:b,name:"attributes"}),d=c.append,e=c.fields,f=c.remove;return(0,i.jsx)(A.sp,{label:"Attributes:",children:(0,i.jsxs)("div",{className:"flex flex-col space-y-[10px]",children:[e.map(function(a,b){return(0,i.jsxs)("div",{className:"border border-[#E5E5E5] group flex items-center justify-between bg-[#F7F8FA] rounded-main/2 py-[5px] px-[10px]",children:[(0,i.jsx)("span",{className:"font-[500] text-[15px]",children:a.name}),(0,i.jsx)("button",{type:"button",onClick:function(){f(b)},className:"group-hover:visible invisible",children:(0,i.jsx)(t.Z,{name:"close",size:12})})]},a.id)}),(0,i.jsx)(E.z,{show:0===e.length,children:"No attribute in this category"}),(0,i.jsx)("div",{}),(0,i.jsxs)("button",{type:"button",onClick:function(){var a=(0,p.Z)();u.eventManager.emit("categories:attributes:select",a,e.map(function(a){return a._id})),u.eventManager.once("categories:attributes:select:response:".concat(a),function(a){d(a)})},className:"py-[10px] flex items-center space-x-[15px] px-[25px] rounded-main/2 border border-[#E5E5E5] bg-[#F7F8FA]",children:[(0,i.jsx)(t.Z,{name:"plus",color:"#AAAAAA"}),(0,i.jsx)("span",{className:"text-[#AAAAAA] font-[500] text-[13px]",children:"Add Attribute"})]})]})})},K=c(86893),L=function(){var a,b,c=(0,l.useState)(!1),g=c[0],j=c[1],m=(0,l.useState)(!1),o=m[0],q=m[1],r=(0,l.useState)([]),t=r[0],v=r[1],x=(0,l.useState)(null),z=x[0],A=x[1],C=(0,l.useState)(null),D=C[0],G=C[1],H=(0,l.useState)(0),I=H[0],J=H[1],L=(0,l.useState)([]),M=L[0],N=L[1],O=(0,l.useState)(!1),P=O[0],Q=O[1],R=function(a){u.eventManager.emit("categories:attributes:select:response:".concat(D),a),U()},S=(a=(0,d.Z)(h().mark(function a(b){var c,d,g,i;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return q(!0),!0===b&&v([]),c=null==z?void 0:z.trim(),a.prev=3,d=!0===b?0:I,a.next=8,k().get("/api/v1/attributes",{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0),params:(0,w.Z)({page:d,limit:10},(null!==(g=null==c?void 0:c.length)&& void 0!==g?g:0)>0&&{q:c})});case 8:if(!0!==(i=a.sent).data.isSuccess){a.next=15;break}return v(!0===b?i.data.result:(0,f.Z)(t).concat((0,f.Z)(i.data.result))),J(d+1),Q(i.data.result.length<10),q(!1),a.abrupt("return");case 15:throw Error("failed to load attributes");case 18:a.prev=18,a.t0=a.catch(3),console.log("[loadAttributes] - error -",a.t0),q(!1);case 22:case"end":return a.stop()}},a,null,[[3,18]])})),function(b){return a.apply(this,arguments)}),T=(b=(0,d.Z)(h().mark(function a(b,c){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return G(b),N(c),j(!0),a.next=5,S(!0);case 5:case"end":return a.stop()}},a)})),function(a,c){return b.apply(this,arguments)}),U=function(){j(!1),Q(!1),J(0),N([]),G(null),A(null),v([]),q(!1)};return(0,l.useEffect)(function(){return u.eventManager.on("categories:attributes:select",T),function(){u.eventManager.off("categories:attributes:select",T)}},[]),(0,i.jsxs)(y.Z,{onClose:U,contentLoading:o&&0===t.length,title:"Select Attribute",useClassicContainer:!0,visible:g,tools:(0,i.jsx)(n.z,{onClick:function(){var a,b=(0,p.Z)();u.eventManager.emit("categories:attributes:add",b),u.eventManager.once("categories:attributes:add:response:".concat(b),(a=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!b){a.next=3;break}return a.next=3,S(!0);case 3:case"end":return a.stop()}},a)})),function(b){return a.apply(this,arguments)}))},size:"small",loading:o,children:"Add"}),children:[(0,i.jsx)("div",{className:"flex flex-col",children:t.map(function(a){var b=void 0!==M.find(function(b){return b===a._id});return(0,i.jsxs)("div",{className:"flex items-center group",children:[(0,i.jsx)("button",{disabled:b,onClick:function(){R(a)},className:s()(b&&"bg-gray-50/50 text-gray-500/60",!b&&"focus:bg-gray-100 hover:bg-gray-50","py-[10px] flex items-center w-full px-[10px]"),children:a.name}),(0,i.jsx)("button",{type:"button",onClick:function(){var b,c=(0,p.Z)();u.eventManager.emit("categories:attributes:edit",a._id,c),u.eventManager.once("categories:attributes:edit:response:".concat(c),(b=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!b){a.next=3;break}return a.next=3,S(!0);case 3:case"end":return a.stop()}},a)})),function(a){return b.apply(this,arguments)}))},className:"px-[14px] hidden hover:bg-blue-50 group-hover:block group-hover:text-blue-600 py-[14px] flex items-center justify-center",children:(0,i.jsx)(K.Nte,{})})]},a._id)})}),(0,i.jsx)(E.z,{show:0===t.length&&!o,children:"Not found attribute"}),(0,i.jsx)(F.n,{onClick:S,loading:o,show:!P})]})},M=c(39748),N=function(){var a,b,c,f=(0,l.useState)(!1),g=f[0],j=f[1],m=(0,l.useState)(!1),o=m[0],p=m[1],q=(0,l.useState)(null),r=q[0],s=q[1],t=(0,l.useState)(null),v=t[0],D=t[1],E=(0,l.useState)(null),F=E[0],G=E[1],H=(0,z.cI)(),I=H.handleSubmit,J=H.control,K=H.reset,L=H.formState.errors,M=(H.setError,H.clearErrors,H.setValue),N=(a=(0,d.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return p(!0),a.prev=1,a.next=4,k().get("/api/v1/attributes/".concat(b),{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0)});case 4:if(!0!==(c=a.sent).data.isSuccess){a.next=17;break}return D(d=c.data.result),G(b),M("contents",d.units),M("nameTm",d.name.tm),M("nameTr",d.name.tr),M("nameEn",d.name.en),M("nameRu",d.name.ru),M("isNumber",d.is_number),p(!1),a.abrupt("return");case 17:throw Error("failed to load original attribute");case 20:a.prev=20,a.t0=a.catch(1),console.log("[loadOriginal] - error -",a.t0),p(!1);case 24:case"end":return a.stop()}},a,null,[[1,20]])})),function(b){return a.apply(this,arguments)}),O=(b=(0,d.Z)(h().mark(function a(b){var c,d,f;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(F){a.next=2;break}return a.abrupt("return");case 2:return c={en:b.nameEn.trim(),tm:b.nameTm.trim(),ru:b.nameRu.trim(),tr:b.nameTr.trim()},d=b.contents,p(!0),a.prev=5,a.next=8,k().put("/api/v1/attributes/".concat(F),{name:c,units:d,is_number:b.isNumber},{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0)});case 8:if(!0!==(f=a.sent).data.isSuccess){a.next=14;break}return u.eventManager.emit("categories:attributes:edit:response:".concat(r),!0),Q(),p(!1),a.abrupt("return");case 14:throw Error("failed to edit new attribute");case 17:a.prev=17,a.t0=a.catch(5),console.log("[edit] - error -",a.t0),p(!1);case 21:case"end":return a.stop()}},a,null,[[5,17]])})),function(a){return b.apply(this,arguments)}),P=(c=(0,d.Z)(h().mark(function a(b,c){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s(c),j(!0),p(!0),a.next=5,N(b);case 5:case"end":return a.stop()}},a)})),function(a,b){return c.apply(this,arguments)}),Q=function(){j(!1),G(null),D(null),K(),p(!1)};return(0,l.useEffect)(function(){return u.eventManager.on("categories:attributes:edit",P),function(){u.eventManager.off("categories:attributes:edit",P)}},[]),(0,i.jsx)(y.Z,{title:"Edit Attribute",visible:g,onClose:Q,modalBox:function(a){return(0,i.jsx)("form",{onSubmit:I(O),children:a})},contentLoading:null===v&&o,useClassicContainer:!0,tools:v&&(0,i.jsx)(n.z,{size:"small",loading:o,type:"submit",children:"Edit"}),children:(0,i.jsxs)("div",{className:"flex flex-col space-y-[20px]",children:[(0,i.jsxs)(A.sp,{label:"Name:",children:[(0,i.jsx)(z.Qr,{control:J,name:"nameEn",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"English"}))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!==L.nameEn}),(0,i.jsx)(z.Qr,{control:J,name:"nameRu",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"Ruskiy"}))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!==L.nameRu}),(0,i.jsx)(z.Qr,{control:J,name:"nameTm",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"Turkmence"}))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!==L.nameTm}),(0,i.jsx)(z.Qr,{control:J,name:"nameTr",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"Turkce"}))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!==L.nameTr})]}),(0,i.jsx)(z.Qr,{control:J,name:"contents",render:function(a){var b=a.field;return(0,i.jsx)(A.sp,{label:"Contents:",children:(0,i.jsx)(A.II,(0,x.Z)((0,w.Z)({className:"w-full"},b),{placeholder:"Example: Mb, Gb, Bit, Byte"}))})}}),(0,i.jsx)(z.Qr,{control:J,name:"isNumber",render:function(a){var b=a.field;return(0,i.jsx)(C,(0,x.Z)((0,w.Z)({label:"Is number"},b),{checked:b.value}))}})]})})},O=function(){var a,b,c,f=(0,l.useState)(!1),g=f[0],j=f[1],m=(0,l.useState)(!1),o=m[0],q=m[1],r=(0,l.useState)(null),s=r[0],v=r[1],x=(0,z.cI)({}),C=x.control,D=x.clearErrors,E=x.reset,F=x.setError,G=x.unregister,I=(x.trigger,x.setValue),J=x.getValues,K=x.handleSubmit,L=x.formState.errors,M=(0,l.useState)(null),N=M[0],O=M[1],Q=(0,l.useState)(null),R=Q[0],S=Q[1],T=l.createRef(),U=(a=(0,d.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return q(!0),a.prev=1,a.next=4,k().get("/api/v1/categories/".concat(b),{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0)});case 4:if(!0!==(c=a.sent).data.isSuccess){a.next=17;break}return d=c.data.result,S(b),O(d),I("nameTm",d.name.tm),I("nameRu",d.name.ru),I("nameTr",d.name.tr),I("nameEn",d.name.en),I("attributes",d.attributes),I("parent",d.parent),q(!1),a.abrupt("return");case 17:throw Error("failed to load original category");case 20:a.prev=20,a.t0=a.catch(1),console.log("[loadOriginal] - error -",a.t0),q(!1);case 24:case"end":return a.stop()}},a,null,[[1,20]])})),function(b){return a.apply(this,arguments)}),V=(b=(0,d.Z)(h().mark(function a(b){var c,d,f,g,i,j;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(R){a.next=3;break}return a.abrupt("return");case 3:if(b.nameTm=b.nameTm.trim(),b.nameEn=b.nameEn.trim(),b.nameRu=b.nameRu.trim(),b.nameTr=b.nameTr.trim(),f=!1,!((null===(c=b.parent)|| void 0===c?void 0:c._id)!==(null==N?void 0:null===(d=N.parent)|| void 0===d?void 0:d._id)&&null===b.parent)||b.icon){a.next=12;break}return F("icon",{type:"required"}),a.abrupt("return");case 12:if((null==N?void 0:N.parent)===null&&b.icon&&(f=!0),q(!0),a.prev=14,console.log(b),(g=new FormData).append("name.tm",b.nameTm),g.append("name.en",b.nameEn),g.append("name.ru",b.nameRu),g.append("name.tr",b.nameTr),g.append("is_image_changed","".concat(f)),b.parent&&g.append("parent",b.parent._id),b.icon&&g.append("image",b.icon),b.attributes)for(i=0;i<b.attributes.length;i++)g.append("attributes",b.attributes[i]._id);return a.next=27,k().put("/api/v1/categories/".concat(R),g,{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0)});case 27:if(j=a.sent,console.log(j),!0!==j.data.isSuccess){a.next=34;break}return u.eventManager.emit("categories:edit:response:".concat(s),!0),X(),q(!1),a.abrupt("return");case 34:throw Error("failed to edit new category");case 37:a.prev=37,a.t0=a.catch(14),console.log("[editCategory] - error -",a.t0),q(!1);case 41:case"end":return a.stop()}},a,null,[[14,37]])})),function(a){return b.apply(this,arguments)}),W=(c=(0,d.Z)(h().mark(function a(b,c){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return j(!0),v(c),q(!0),a.next=5,U(b);case 5:case"end":return a.stop()}},a)})),function(a,b){return c.apply(this,arguments)}),X=function(){j(!1),v(null),O(null),S(null),E(),q(!1)};return(0,l.useEffect)(function(){return u.eventManager.on("categories:edit",W),function(){u.eventManager.off("categories:edit",W)}},[]),(0,i.jsx)(y.Z,{title:"Edit Category",onClose:X,visible:g,useClassicContainer:!0,tools:(0,i.jsx)(n.z,{type:"submit",size:"small",loading:o,children:"Edit"}),modalBox:function(a){return(0,i.jsx)("form",{onSubmit:K(V),children:a})},contentLoading:o&&null===N,children:(0,i.jsxs)("div",{className:"flex flex-col space-y-[20px]",children:[(0,i.jsxs)(A.sp,{label:"Name:",children:[(0,i.jsx)(z.Qr,{control:C,name:"nameEn",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,w.Z)({className:"w-full",iserror:void 0!=L.nameEn,placeholder:"English"},b))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=L.nameEn}),(0,i.jsx)(z.Qr,{control:C,name:"nameRu",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,w.Z)({className:"w-full",iserror:void 0!=L.nameEn,placeholder:"Ruskiy"},b))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=L.nameRu}),(0,i.jsx)(z.Qr,{control:C,name:"nameTm",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,w.Z)({className:"w-full",iserror:void 0!=L.nameEn,placeholder:"Turkmence"},b))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=L.nameTm}),(0,i.jsx)(z.Qr,{control:C,name:"nameTr",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsx)(A.II,(0,w.Z)({className:"w-full",iserror:void 0!=L.nameEn,placeholder:"Turkce"},b))}}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=L.nameTr})]}),(0,i.jsx)(z.Qr,{control:C,name:"parent",render:function(a){var b,c=a.field;return(0,i.jsxs)("div",{className:"space-y-[20px]",children:[(0,i.jsx)(A.sp,{label:"Subcategory of:",children:(0,i.jsxs)("div",{className:"flex items-center relative",children:[(0,i.jsx)(A.JD,{disabled:(null==N?void 0:N.parent)===null,value:null===(b=c.value)|| void 0===b?void 0:b.name,notSelectedValue:"Not Selected",onClick:function(){var a=(0,p.Z)();u.eventManager.emit("categories:select:parent",a,c.value?[c.value._id]:[]),u.eventManager.once("categories:select:parent:response:".concat(a),function(a){I("parent",a),G("icon")})},render:function(a){var b;return(0,i.jsxs)("div",{className:"flex items-center space-x-[10px]",children:[(0,i.jsx)("img",{src:"/cdn/".concat(null===(b=c.value)|| void 0===b?void 0:b.image),className:"rounded-main/2 border bg-white border-[#E5E5E5] w-[20px] h-[20px]"}),(0,i.jsx)("span",{className:"font-[500] text-[15.5px]",children:a})]})}}),c.value&&(0,i.jsx)("button",{type:"button",className:"absolute right-[10px]",onClick:function(){I("parent",N.parent)},children:(0,i.jsx)(t.Z,{name:"close",size:12})})]})}),c.value&&(0,i.jsx)(P,{getValues:J,control:C}),!c.value&&(0,i.jsx)(z.Qr,{control:C,name:"icon",render:function(a){var b=a.field;return(0,i.jsxs)(A.sp,{error:void 0!=L.icon,label:"Icon:",children:[(0,i.jsx)(H.j,{ref:T,onClick:function(){var a;null===(a=T.current)|| void 0===a||a.click()},image:b.value?URL.createObjectURL(b.value):"/cdn/".concat(null==N?void 0:N.image),onChange:function(a){if(a.target.value){var b=a.target.files[0];b&&(I("icon",b),D("icon"))}},height:"75px",width:"75px"}),(0,i.jsx)(A.pd,{error:"Required",show:void 0!=L.icon})]})}})]})}})]})})},P=function(a){var b=a.control;a.getValues;var c=(0,z.Dq)({control:b,name:"attributes"}),d=c.append,e=c.fields,f=c.remove;return(0,i.jsx)(A.sp,{label:"Attributes:",children:(0,i.jsxs)("div",{className:"flex flex-col space-y-[10px]",children:[e.map(function(a,b){return(0,i.jsxs)("div",{className:"border border-[#E5E5E5] group flex items-center justify-between bg-[#F7F8FA] rounded-main/2 py-[5px] px-[10px]",children:[(0,i.jsx)("span",{className:"font-[500] text-[15px]",children:a.name}),(0,i.jsx)("button",{type:"button",onClick:function(){f(b)},className:"group-hover:visible invisible",children:(0,i.jsx)(t.Z,{name:"close",size:12})})]},a.id)}),(0,i.jsx)(E.z,{show:0===e.length,children:"No attribute in this category"}),(0,i.jsx)("div",{}),(0,i.jsxs)("button",{type:"button",onClick:function(){var a=(0,p.Z)();u.eventManager.emit("categories:attributes:select",a,e.map(function(a){return a._id})),u.eventManager.once("categories:attributes:select:response:".concat(a),function(a){d(a)})},className:"py-[10px] flex items-center space-x-[15px] px-[25px] rounded-main/2 border border-[#E5E5E5] bg-[#F7F8FA]",children:[(0,i.jsx)(t.Z,{name:"plus",color:"#AAAAAA"}),(0,i.jsx)("span",{className:"text-[#AAAAAA] font-[500] text-[13px]",children:"Edit Attribute"})]})]})})},Q=c(67971),R=function(){var a,b=(0,l.useState)(!1),c=b[0],g=b[1],j=(0,l.useState)(!1),r=j[0],s=j[1],t=(0,l.useState)(0),w=t[0],x=t[1],y=(0,l.useState)([]),z=y[0],A=y[1],C=(a=(0,d.Z)(h().mark(function a(b){var c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return!0==b&&(x(0),s(!1)),g(!0),a.prev=2,a.next=5,k().get("/api/v1/categories",{headers:(0,e.Z)({},B.G.AddAccessTokenToHeader,!0),params:{page:!0==b?0:w,limit:10}});case 5:if(!0!=(c=a.sent).data.isSuccess){a.next=12;break}return A(!0===b?c.data.result:(0,f.Z)(z).concat((0,f.Z)(c.data.result))),s(c.data.result.length<10),x(w+1),g(!1),a.abrupt("return");case 12:throw Error("failed to load categories");case 15:a.prev=15,a.t0=a.catch(2),console.log("[loadCategories] - error -",a.t0);case 18:g(!1);case 19:case"end":return a.stop()}},a,null,[[2,15]])})),function(b){return a.apply(this,arguments)});return(0,l.useEffect)(function(){c||C()},[]),(0,i.jsxs)(o.Z,{className:"relative",children:[(0,i.jsx)(q.V2,{children:(0,i.jsx)(q.dR,{children:(0,i.jsx)(q.ZX,{icon:"plus",onClick:function(){var a,b=(0,p.Z)();u.eventManager.emit("categories:add",b),u.eventManager.once("categories:add:response:".concat(b),(a=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!b){a.next=4;break}return console.log("successfuly added new category"),a.next=4,C(!0);case 4:case"end":return a.stop()}},a)})),function(b){return a.apply(this,arguments)}))},children:"New Category"})})}),c&&(0,i.jsx)("div",{className:"flex absolute w-full h-full z-[10] flex-grow bg-[rgba(255,255,255,0.4)] items-center justify-center py-10",children:(0,i.jsx)(m.Z,{color:Q.Colors.primary,loading:c})}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4 px-7",children:z.map(function(a,b){return(0,i.jsx)(v,{reload:(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C(!0);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),category:a},"category-index-".concat(b))})}),!c&&!r&&(0,i.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,i.jsx)(n.z,{disabled:c,size:"small",onClick:C,children:"load more"})}),(0,i.jsx)(I,{}),(0,i.jsx)(O,{}),(0,i.jsx)(G,{}),(0,i.jsx)(M.d,{}),(0,i.jsx)(L,{}),(0,i.jsx)(D,{}),(0,i.jsx)(N,{})]})}}},function(a){a.O(0,[536,893,917,774,888,179],function(){var b;return a(a.s=48965)}),_N_E=a.O()}])