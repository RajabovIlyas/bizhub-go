(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{85349:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/notifications",function(){return c(58305)}])},71767:function(a,b,c){"use strict";c.d(b,{z:function(){return e}});var d=c(85893);c(67294);var e=function(a){var b=a.show,c=a.children;return!0===b?(0,d.jsx)("div",{className:"flex items-center justify-center py-6",children:(0,d.jsx)("span",{className:"text-gray-500/90 italic bg-gray-50 rounded-[10px] py-1.5 px-3",children:c})}):null}},74634:function(a,b,c){"use strict";c.d(b,{II:function(){return m},JD:function(){return t},Kx:function(){return o},Or:function(){return r},kl:function(){return p},ky:function(){return n},pd:function(){return s},sp:function(){return q},yn:function(){return l}});var d=c(26042),e=c(69396),f=c(99534),g=c(85893),h=c(94184),i=c.n(h),j=c(67294),k=c(14212),l=function(a){var b=a.value;return(0,g.jsx)("p",{className:"outline-none text-[17px] bg-transparent text-[16px] font-[500]",children:b})},m=j.forwardRef(function(a,b){var c=a.suffix,h=a.small,l=a.asPasswordField,m=a.prefix,n=a.iserror,o=(0,f.Z)(a,["suffix","small","asPasswordField","prefix","iserror"]),p=(0,j.useState)(!1),q=p[0],r=p[1],s=function(){r(!q)};return(0,g.jsxs)("div",{className:"flex items-center relative",children:[(0,g.jsx)("input",(0,e.Z)((0,d.Z)({ref:b},o,l&& !1===q&&{type:"password"}),{className:i()("border outline-none",n?"border-red-500":"border-primary",o.className,!h&&"px-2.5 py-1.5 rounded-main/2",h&&"px-[6px] py-[2.5px] rounded-main/2")})),m&&(0,g.jsx)("div",{className:i()(n&&"text-red-500","absolute left-2.5"),children:m}),l?(0,g.jsx)("div",{className:"absolute right-2.5",children:(0,g.jsx)("button",{onClick:s,className:"flex items-center justify-center outline-none transition-all",children:(0,g.jsx)(k.Z,{name:q?"eye":"eyeHidden",className:q?"fill-black":"stroke-black fill-transparent",size:20})})}):c&&(0,g.jsx)("div",{className:i()(n&&"text-red-500","absolute right-2.5"),children:c})]})}),n=j.forwardRef(function(a,b){var c=a.suffix,h=(0,f.Z)(a,["suffix"]);return(0,g.jsxs)("div",{className:"flex items-center relative",children:[(0,g.jsx)("input",(0,e.Z)((0,d.Z)({},h),{ref:b,className:"border border-primary outline-none px-2.5 py-1.5 rounded-main "+h.className})),c&&(0,g.jsx)("div",{className:"absolute right-2.5",children:c})]})}),o=j.forwardRef(function(a,b){var c=a.iserror,h=(0,f.Z)(a,["iserror"]);return(0,g.jsx)("textarea",(0,e.Z)((0,d.Z)({ref:b},h),{className:i()("border outline-none px-2.5 py-1.5 rounded-main/2 ",h.className,c?"border-red-500":"border-primary")}))}),p=function(a){var b=a.label,c=a.children,h=(0,f.Z)(a,["label","children"]);return(0,g.jsxs)("div",{className:"flex flex-col space-y-[20px]",children:[(0,g.jsx)("label",(0,e.Z)((0,d.Z)({},h),{className:"text-[17px]",children:b})),c]})},q=function(a){var b=a.label,c=a.children,h=a.rootClassName,i=a.error,k=(0,f.Z)(a,["label","children","rootClassName","error"]);return(0,g.jsxs)("div",{className:"flex flex-col space-y-[10px] "+h,children:[(0,g.jsx)("label",(0,e.Z)((0,d.Z)({},k),{className:"text-[17px]",children:b})),j.Children.map(c,function(a){return(0,e.Z)((0,d.Z)({},a),{props:(0,e.Z)((0,d.Z)({},a.props),{iserror:i})})})]})},r=function(a){var b=a.label,c=a.children,h=a.rootClassName,i=a.suffix,j=(0,f.Z)(a,["label","children","rootClassName","suffix"]);return(0,g.jsxs)("div",{className:"flex flex-col space-y-[10px] border-b border-[#E5E5E5] pb-[15px] "+h,children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("label",(0,e.Z)((0,d.Z)({},j),{className:"text-[17px] text-[#6E5AD1]",children:b})),i&&i]}),c]})},s=function(a){var b=a.show,c=a.error;return b?(0,g.jsx)("div",{className:"bg-[rgba(255,0,0,0.15)] px-[8px] py-[5px] rounded-[5px]",children:(0,g.jsx)("span",{className:"text-[14px] font-[500] text-[#FF0000]",children:c})}):null},t=j.forwardRef(function(a,b){var c=a.value,h=a.onClick,i=a.render,j=a.notSelectedValue,k=(0,f.Z)(a,["value","onClick","render","notSelectedValue"]);return(0,g.jsxs)("button",(0,e.Z)((0,d.Z)({},k),{type:"button",onClick:h,ref:b,className:"rounded-main/2 font-[500] text-[15.5px] bg-[#F7F8FA] w-full flex items-center py-[5px] px-[10px] border border-[#E5E5E5]",children:[!c&&(null!=j?j:"Not Selected"),!i&&c&&c,i&&c&&i(c)]}))})},78119:function(a,b,c){"use strict";c.d(b,{n:function(){return f}});var d=c(85893);c(67294);var e=c(2072),f=function(a){var b=a.onClick,c=a.show,f=a.loading;return c?(0,d.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,d.jsx)(e.z,{loading:f,size:"small",onClick:b,children:"Load More"})}):null}},92456:function(a,b,c){"use strict";var d=c(26042),e=c(69396),f=c(99534),g=c(85893),h=c(94184),i=c.n(h);c(67294);var j=function(a){var b=a.children,c=a.className,h=(0,f.Z)(a,["children","className"]);return(0,g.jsx)("div",(0,e.Z)((0,d.Z)({className:i()("w-full flex flex-col h-full",c)},h),{children:b}))};b.Z=j},7641:function(a,b,c){"use strict";c.d(b,{V2:function(){return l},ZX:function(){return n},dR:function(){return m}});var d=c(26042),e=c(69396),f=c(99534),g=c(85893),h=c(94184),i=c.n(h),j=c(67294),k=c(14212),l=function(a){var b=a.children;return(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[1===j.Children.count(b)&&(0,g.jsx)("div",{}),j.Children.map(b,function(a){return a})]})},m=function(a){var b=a.children,c=a.paddingYDisabled,d=a.style;return(0,g.jsx)("div",{style:d,className:i()("flex items-center space-x-7 px-7",!c&&"py-7"),children:b})},n=function(a){var b=a.children,c=a.icon,h=a.color,j=void 0===h?"primary":h,l=(0,f.Z)(a,["children","icon","color"]);return(0,g.jsxs)("button",(0,e.Z)((0,d.Z)({},l),{className:i()("flex items-center space-x-2 py-2 px-3.5 rounded-main border","primary"===j&&"border-primary bg-primary","outline"===j&&"bg-white"),children:[c&&(0,g.jsx)(k.Z,{name:c,color:"primary"===j?"white":"black",size:15}),(0,g.jsx)("span",{className:i()("text-[15px] font-medium","primary"===j&&"text-white","outline"===j&&"text-black"),children:b})]}))}},58305:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return J}});var d=c(47568),e=c(14924),f=c(10797),g=c(34051),h=c.n(g),i=c(85893),j=c(67294),k=c(92456),l=c(7641),m=c(26042),n=c(9669),o=c.n(n),p=c(87536),q=c(2072),r=c(74634),s=c(65791),t=c(75758),u=c(32130),v=c(94184),w=c.n(v),x=function(a){var b=a.box;return(0,i.jsx)("div",{className:"flex items-center divide-x rounded-main max-w-fit overflow-hidden border border-[#E5E5E5] bg-[#F7F8FA] bg-red-500",children:b.items.map(function(a,c){var d=!!b.box.find(function(b){return b.value===a.value});return(0,i.jsx)("button",{type:"button",onClick:function(){b.toggle(a)},className:w()("px-[10px] py-[5px] transition-all duration-[300ms]",d&&"bg-gray-200",!d&&""),children:a.content},"multi-select-item-".concat(c))})})},y=function(a){var b=(0,j.useState)([]),c=b[0],d=b[1],e=function(b){if(c.find(function(a){return a.value===b.value})){var e=c.filter(function(a){return a.value!==b.value}),g=a.find(function(a){return!0===a.defaultSelect});d(e.length>0?e:g?[g]:[])}else d((0,f.Z)(void 0!==b.group?c.filter(function(a){return a.group===b.group}):c).concat([b,]))},g=function(){d([])};return{items:a,box:c,toggle:e,reset:g,setItems:d}},z=function(){var a,b=(0,j.useState)(!1),c=b[0],f=b[1],g=y([{content:"All",value:"all",group:0,defaultSelect:!0},{content:"Users",value:"users",group:1},{content:"Sellers",value:"sellers",group:1},]),k=(0,p.cI)({defaultValues:{audience:{all:!0}}}),l=k.control,n=k.setError,v=(k.clearErrors,k.setValue),w=k.formState.errors,z=k.reset,A=k.handleSubmit,B=(0,j.useState)(!1),C=B[0],D=B[1],E=(0,j.useState)(null),F=E[0],G=E[1],H=(a=(0,d.Z)(h().mark(function a(b){var c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.text=b.text.trim(),b.audience.sellers||b.audience.users||(b.audience.all=!0),0!==b.text.length){a.next=5;break}return n("text",{type:"required"}),a.abrupt("return");case 5:return D(!0),a.prev=6,a.next=9,o().post("/api/v1/notifications",{text:b.text,audience:b.audience},{headers:(0,e.Z)({},u.G.AddAccessTokenToHeader,!0)});case 9:if(c=a.sent,console.log(c),!0!==c.data.isSuccess){a.next=16;break}return t.eventManager.emit("notifications:add:response:".concat(F),!0),J(),D(!1),a.abrupt("return");case 16:throw Error("failed to publish new notification");case 19:a.prev=19,a.t0=a.catch(6),console.log("[add] - error -",a.t0),D(!1);case 23:case"end":return a.stop()}},a,null,[[6,19]])})),function(b){return a.apply(this,arguments)}),I=function(a){G(a),g.setItems([{value:"all",group:0,content:"All"},]),f(!0)},J=function(){f(!1),G(null),g.reset(),z(),D(!1)};return(0,j.useEffect)(function(){var a={all:!1,sellers:!1,users:!1};g.box.forEach(function(b){"all"===b.value&&(a.all=!0),"sellers"===b.value&&(a.sellers=!0),"users"===b.value&&(a.users=!0)}),v("audience",a)},[g.box]),(0,j.useEffect)(function(){return t.eventManager.on("notifications:add",I),function(){t.eventManager.off("notifications:add",I)}},[]),(0,i.jsx)(s.Z,{onClose:J,className:"flex flex-col flex-grow",visible:c,title:"New Notification",modalBox:function(a){return(0,i.jsx)("form",{onSubmit:A(H),children:a})},tools:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(q.z,{size:"small",type:"submit",loading:C,children:"Send"})}),children:(0,i.jsxs)("div",{className:"flex flex-col flex-grow space-y-[15px]",children:[(0,i.jsx)(x,{box:g}),(0,i.jsx)(p.Qr,{control:l,name:"text",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Kx,(0,m.Z)({className:"flex-grow"},b)),(0,i.jsx)(r.pd,{error:"Required",show:void 0!==w.text})]})}})]})})},A=z,B=c(94989),C=function(){var a,b,c=(0,j.useState)(!1),d=c[0],e=c[1],f=(0,j.useState)(null),g=f[0],h=f[1],k=function(a){h(a),e(!0)},l=function(){e(!1),h(null)};(0,j.useEffect)(function(){return t.eventManager.on("notifications:info:show",k),t.eventManager.on("notifications:info:hide",l),function(){t.eventManager.off("notifications:info:show",k),t.eventManager.off("notifications:info:hide",l)}},[]);var m,n=(0,B.Y)(new Date(null!==(b=null==g?void 0:g.created_at)&& void 0!==b?b:""));return(0,i.jsx)(s.Z,{onClose:l,className:"flex flex-col flex-grow",visible:d,title:g?(m="",g.audience.all?"All":(g.audience.users&&(m+="Users"),g.audience.sellers&&(m.length>0&&(m+=", "),m+="Sellers"),m)):"Loading...",children:g&&(0,i.jsxs)("div",{className:"flex flex-col flex-grow space-y-[15px]",children:[(null==g?void 0:g.checked_by)===null&&(0,i.jsx)("div",{className:"py-[5px] px-[10px] rounded-main/2 bg-blue-100",children:(0,i.jsx)("span",{className:"text-blue-600 text-[14px]",children:"Checking by admin checkers.."})}),(0,i.jsxs)("span",{className:"font-[400] text-[12px] text-[#777777]",children:[n.getDay()," ",n.getMonthAsString(),", ",n.getYear(),"y. /"," ",n.getHoursAsString(),":",n.getMinutesAsString()]}),(0,i.jsx)("p",{className:"text-[16px] font-[500]",children:null==g?void 0:null===(a=g.text)|| void 0===a?void 0:a.en})]})})},D=C,E=c(57632),F=c(82668),G=c(67971),H=c(71767),I=c(78119),J=function(){var a,b=(0,j.useState)(!1),c=b[0],g=b[1],m=(0,j.useState)(!1),n=m[0],p=m[1],q=(0,j.useState)(0),r=q[0],s=q[1],v=(0,j.useState)([]),w=v[0],x=v[1],y=(a=(0,d.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c=!0===b?0:r,a.next=4,o().get("/api/v1/notifications",{params:{limit:10,page:c},headers:(0,e.Z)({},u.G.AddAccessTokenToHeader,!0)});case 4:!0===(d=a.sent).data.isSuccess&&(p(d.data.result.length<10),s(c+1),x(!0===b?d.data.result:(0,f.Z)(w).concat((0,f.Z)(d.data.result)))),g(!1),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("[loadNotifications] - error -",a.t0),g(!1);case 13:case"end":return a.stop()}},a,null,[[0,9]])})),function(b){return a.apply(this,arguments)});return(0,j.useEffect)(function(){y(!0)},[]),(0,i.jsxs)(k.Z,{className:"relative",children:[(0,i.jsx)(l.V2,{children:(0,i.jsx)(l.dR,{children:(0,i.jsx)(l.ZX,{onClick:function(){var a,b=(0,E.Z)();t.eventManager.emit("notifications:add",b),t.eventManager.once("notifications:add:response:".concat(b),(a=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!b){a.next=3;break}return a.next=3,y(!0);case 3:case"end":return a.stop()}},a)})),function(b){return a.apply(this,arguments)}))},icon:"plus",children:"New Notification"})})}),c&&0===w.length&&(0,i.jsx)("div",{className:"flex items-center justify-center w-full h-full absolute left-0 top-0",children:(0,i.jsx)(F.Z,{color:G.Colors.primary})}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4 px-7",children:w.map(function(a,b){var c=(0,B.Y)(new Date(a.created_at)),d=[];return a.audience.all&&d.push("All"),a.audience.users&&d.push("Users"),a.audience.sellers&&d.push("Sellers"),(0,i.jsxs)("div",{onClick:function(){t.eventManager.emit("notifications:info:show",a)},className:"shadow-main cursor-pointer justify-between bg-white rounded-main flex items-center py-3 px-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,i.jsx)("h3",{className:"text-[17px]",children:d.map(function(a,b){return a+(b!==d.length-1?", ":"")})}),(0,i.jsx)("h5",{className:"text-[15px] font-normal text-[#6E5AD1]",children:a.text.en})]}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("span",{className:"text-[#777777] text-[12px]",children:[c.getDay()," ",c.getMonthAsString(),","," ",c.getYear(),"y. / ",c.getHoursAsString(),":",c.getMinutesAsString()]})})]},"notification-index-".concat(b))})}),(0,i.jsx)(H.z,{show:0===w.length&&!c,children:"Not found notification"}),(0,i.jsx)(I.n,{show:!n&&w.length>0,loading:c,onClick:y}),(0,i.jsx)(A,{}),(0,i.jsx)(D,{})]})}}},function(a){a.O(0,[536,774,888,179],function(){var b;return a(a.s=85349)}),_N_E=a.O()}])