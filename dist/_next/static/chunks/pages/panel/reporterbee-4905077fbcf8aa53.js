(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[714],{99768:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/reporterbee",function(){return c(94575)}])},74634:function(a,b,c){"use strict";c.d(b,{II:function(){return m},JD:function(){return t},Kx:function(){return o},Or:function(){return r},kl:function(){return p},ky:function(){return n},pd:function(){return s},sp:function(){return q},yn:function(){return l}});var d=c(26042),e=c(69396),f=c(99534),g=c(85893),h=c(94184),i=c.n(h),j=c(67294),k=c(14212),l=function(a){var b=a.value;return(0,g.jsx)("p",{className:"outline-none text-[17px] bg-transparent text-[16px] font-[500]",children:b})},m=j.forwardRef(function(a,b){var c=a.suffix,h=a.small,l=a.asPasswordField,m=a.prefix,n=a.iserror,o=(0,f.Z)(a,["suffix","small","asPasswordField","prefix","iserror"]),p=(0,j.useState)(!1),q=p[0],r=p[1],s=function(){r(!q)};return(0,g.jsxs)("div",{className:"flex items-center relative",children:[(0,g.jsx)("input",(0,e.Z)((0,d.Z)({ref:b},o,l&& !1===q&&{type:"password"}),{className:i()("border outline-none",n?"border-red-500":"border-primary",o.className,!h&&"px-2.5 py-1.5 rounded-main/2",h&&"px-[6px] py-[2.5px] rounded-main/2")})),m&&(0,g.jsx)("div",{className:i()(n&&"text-red-500","absolute left-2.5"),children:m}),l?(0,g.jsx)("div",{className:"absolute right-2.5",children:(0,g.jsx)("button",{onClick:s,className:"flex items-center justify-center outline-none transition-all",children:(0,g.jsx)(k.Z,{name:q?"eye":"eyeHidden",className:q?"fill-black":"stroke-black fill-transparent",size:20})})}):c&&(0,g.jsx)("div",{className:i()(n&&"text-red-500","absolute right-2.5"),children:c})]})}),n=j.forwardRef(function(a,b){var c=a.suffix,h=(0,f.Z)(a,["suffix"]);return(0,g.jsxs)("div",{className:"flex items-center relative",children:[(0,g.jsx)("input",(0,e.Z)((0,d.Z)({},h),{ref:b,className:"border border-primary outline-none px-2.5 py-1.5 rounded-main "+h.className})),c&&(0,g.jsx)("div",{className:"absolute right-2.5",children:c})]})}),o=j.forwardRef(function(a,b){var c=a.iserror,h=(0,f.Z)(a,["iserror"]);return(0,g.jsx)("textarea",(0,e.Z)((0,d.Z)({ref:b},h),{className:i()("border outline-none px-2.5 py-1.5 rounded-main/2 ",h.className,c?"border-red-500":"border-primary")}))}),p=function(a){var b=a.label,c=a.children,h=(0,f.Z)(a,["label","children"]);return(0,g.jsxs)("div",{className:"flex flex-col space-y-[20px]",children:[(0,g.jsx)("label",(0,e.Z)((0,d.Z)({},h),{className:"text-[17px]",children:b})),c]})},q=function(a){var b=a.label,c=a.children,h=a.rootClassName,i=a.error,k=(0,f.Z)(a,["label","children","rootClassName","error"]);return(0,g.jsxs)("div",{className:"flex flex-col space-y-[10px] "+h,children:[(0,g.jsx)("label",(0,e.Z)((0,d.Z)({},k),{className:"text-[17px]",children:b})),j.Children.map(c,function(a){return(0,e.Z)((0,d.Z)({},a),{props:(0,e.Z)((0,d.Z)({},a.props),{iserror:i})})})]})},r=function(a){var b=a.label,c=a.children,h=a.rootClassName,i=a.suffix,j=(0,f.Z)(a,["label","children","rootClassName","suffix"]);return(0,g.jsxs)("div",{className:"flex flex-col space-y-[10px] border-b border-[#E5E5E5] pb-[15px] "+h,children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("label",(0,e.Z)((0,d.Z)({},j),{className:"text-[17px] text-[#6E5AD1]",children:b})),i&&i]}),c]})},s=function(a){var b=a.show,c=a.error;return b?(0,g.jsx)("div",{className:"bg-[rgba(255,0,0,0.15)] px-[8px] py-[5px] rounded-[5px]",children:(0,g.jsx)("span",{className:"text-[14px] font-[500] text-[#FF0000]",children:c})}):null},t=j.forwardRef(function(a,b){var c=a.value,h=a.onClick,i=a.render,j=a.notSelectedValue,k=(0,f.Z)(a,["value","onClick","render","notSelectedValue"]);return(0,g.jsxs)("button",(0,e.Z)((0,d.Z)({},k),{type:"button",onClick:h,ref:b,className:"rounded-main/2 font-[500] text-[15.5px] bg-[#F7F8FA] w-full flex items-center py-[5px] px-[10px] border border-[#E5E5E5]",children:[!c&&(null!=j?j:"Not Selected"),!i&&c&&c,i&&c&&i(c)]}))})},92456:function(a,b,c){"use strict";var d=c(26042),e=c(69396),f=c(99534),g=c(85893),h=c(94184),i=c.n(h);c(67294);var j=function(a){var b=a.children,c=a.className,h=(0,f.Z)(a,["children","className"]);return(0,g.jsx)("div",(0,e.Z)((0,d.Z)({className:i()("w-full flex flex-col h-full",c)},h),{children:b}))};b.Z=j},7641:function(a,b,c){"use strict";c.d(b,{V2:function(){return l},ZX:function(){return n},dR:function(){return m}});var d=c(26042),e=c(69396),f=c(99534),g=c(85893),h=c(94184),i=c.n(h),j=c(67294),k=c(14212),l=function(a){var b=a.children;return(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[1===j.Children.count(b)&&(0,g.jsx)("div",{}),j.Children.map(b,function(a){return a})]})},m=function(a){var b=a.children,c=a.paddingYDisabled,d=a.style;return(0,g.jsx)("div",{style:d,className:i()("flex items-center space-x-7 px-7",!c&&"py-7"),children:b})},n=function(a){var b=a.children,c=a.icon,h=a.color,j=void 0===h?"primary":h,l=(0,f.Z)(a,["children","icon","color"]);return(0,g.jsxs)("button",(0,e.Z)((0,d.Z)({},l),{className:i()("flex items-center space-x-2 py-2 px-3.5 rounded-main border","primary"===j&&"border-primary bg-primary","outline"===j&&"bg-white"),children:[c&&(0,g.jsx)(k.Z,{name:c,color:"primary"===j?"white":"black",size:15}),(0,g.jsx)("span",{className:i()("text-[15px] font-medium","primary"===j&&"text-white","outline"===j&&"text-black"),children:b})]}))}},50975:function(a,b,c){"use strict";c.d(b,{j:function(){return g}});var d=c(85893),e=c(67294),f=c(14212),g=e.forwardRef(function(a,b){var c=a.onClick,e=a.onChange,g=a.image,h=a.height,i=a.width;return(0,d.jsxs)("div",{style:{height:void 0===h?"230px":h,width:void 0===i?"100%":i},className:"overflow-hidden relative bg-[#F7F8FA] flex items-center justify-center w-full flex-col border rounded-main",children:[g&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("img",{src:g,className:"h-full w-full"})}),(0,d.jsx)("div",{className:"flex cursor-pointer absolute w-full h-full justify-center flex-col items-center space-y-[20px]",onClick:c,children:!g&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(f.Z,{name:"plus",size:40,color:"#AAAAAA"})})}),(0,d.jsx)("input",{type:"file",className:"hidden",ref:b,onChange:e,accept:"image/*"})]})})},94575:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return H}});var d=c(47568),e=c(14924),f=c(10797),g=c(34051),h=c.n(g),i=c(85893),j=c(9669),k=c.n(j),l=c(67294),m=c(82668),n=c(57632),o=c(2072),p=c(14212),q=c(92456),r=c(7641),s=c(32130),t=c(67971),u=c(26042),v=c(69396),w=c(87536),x=c(74634),y=c(65791),z=c(75758),A=function(){var a,b=(0,l.useState)(!1),c=b[0],f=b[1],g=(0,w.cI)(),j=g.control,m=g.reset,n=g.clearErrors,q=g.setValue,r=g.setError,t=g.formState.errors,A=g.handleSubmit,B=(0,l.useState)(!1),C=(B[0],B[1]),D=l.createRef(),E=(0,l.useState)(null),F=E[0],G=E[1],H=(a=(0,d.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.image){a.next=3;break}return r("image",{type:"required"}),a.abrupt("return");case 3:return C(!0),a.prev=4,(c=new FormData).append("title",b.title),c.append("description",b.description),c.append("image",b.image),a.next=11,k().post("/api/v1/reporterbee/posts",c,{headers:(0,e.Z)({},s.G.AddAccessTokenToHeader,!0)});case 11:if(d=a.sent,console.log(d),!0!==d.data.isSuccess){a.next=17;break}return z.eventManager.emit("reporterbee:add:response:".concat(F),!0),I(),a.abrupt("return");case 17:a.next=23;break;case 19:a.prev=19,a.t0=a.catch(4),console.log("[post] - error -",a.t0),C(!1);case 23:case"end":return a.stop()}},a,null,[[4,19]])})),function(b){return a.apply(this,arguments)}),I=function(){f(!1),m(),C(!1)},J=function(a){f(!0),G(a)};return(0,l.useEffect)(function(){return z.eventManager.on("reporterbee:add:show",J),z.eventManager.on("reporterbee:add:hide",I),function(){z.eventManager.off("reporterbee:add:show",J),z.eventManager.off("reporterbee:add:hide",I)}},[]),(0,i.jsx)(y.Z,{title:"New Post",useClassicContainer:!0,visible:c,onClose:I,modalBox:function(a){return(0,i.jsx)("form",{onSubmit:A(H),children:a})},tools:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.z,{size:"small",type:"submit",children:"Post"})}),children:(0,i.jsxs)("div",{className:"flex flex-col space-y-[15px]",children:[(0,i.jsxs)(x.sp,{label:"Image:",children:[(0,i.jsx)(w.Qr,{control:j,name:"image",rules:{required:!0},render:function(a){var b=a.field;return(0,i.jsxs)("div",{className:"overflow-hidden relative bg-[#F7F8FA] flex items-center justify-center w-full h-[230px] flex-col border rounded-main",children:[b.value&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("img",{src:URL.createObjectURL(b.value),className:"h-full w-full"})}),(0,i.jsx)("div",{className:"flex cursor-pointer absolute w-full h-full justify-center flex-col items-center space-y-[20px]",onClick:function(){var a;null===(a=D.current)|| void 0===a||a.click()},children:!b.value&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{name:"plus",size:40,color:"#AAAAAA"}),(0,i.jsx)("h3",{className:"text-[16px] text-[#AAAAAA]",children:"Add Photo"})]})}),(0,i.jsx)("input",{type:"file",className:"hidden",ref:D,onChange:function(a){if(null!=a.target.files){var b,c=null===(b=a.target)|| void 0===b?void 0:b.files[0];c&&(q("image",c),n("image"))}},accept:"image/*"})]})}}),(0,i.jsx)(x.pd,{error:"Required",show:void 0!=t.image})]}),(0,i.jsx)(w.Qr,{control:j,name:"title",rules:{required:!0},render:function(a){var b,c=a.field;return(0,i.jsxs)(x.sp,{error:void 0!=t.title,label:"Heading:",children:[(0,i.jsx)(x.II,(0,v.Z)((0,u.Z)({},c),{className:"w-full"})),(0,i.jsx)(x.pd,{error:"Required",show:(null===(b=t.title)|| void 0===b?void 0:b.type)==="required"})]})}}),(0,i.jsx)(w.Qr,{control:j,name:"description",rules:{required:!0},render:function(a){var b,c=a.field;return(0,i.jsxs)(x.sp,{error:void 0!=t.description,label:"Description:",children:[(0,i.jsx)(x.Kx,(0,v.Z)((0,u.Z)({},c),{className:"w-full",rows:6})),(0,i.jsx)(x.pd,{error:"Required",show:(null===(b=t.description)|| void 0===b?void 0:b.type)==="required"})]})}})]})})},B=A,C=c(50975),D=function(){var a,b,c,f=(0,l.useState)(!1),g=f[0],j=f[1],m=(0,l.useState)(!1),n=(m[0],m[1]),p=(0,l.useState)(null),q=p[0],r=p[1],t=(0,l.useState)(null),A=t[0],B=t[1],D=(0,w.cI)(),E=D.control,F=D.setValue,G=(D.setError,D.formState.errors),H=D.clearErrors,I=D.reset,J=D.handleSubmit,K=l.createRef(),L=(a=(0,d.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(b),n(!0),a.prev=2,c=new FormData,b.logo&&c.append("logo",b.logo),c.append("name",b.name),a.next=8,k().put("/api/v1/reporterbee",c,{headers:(0,e.Z)({},s.G.AddAccessTokenToHeader,!0)});case 8:if(d=a.sent,console.log(d),!0!==d.data.isSuccess){a.next=14;break}return z.eventManager.emit("reporterbee:edit:response:".concat(q),!0),N(),a.abrupt("return");case 14:throw Error("failed to update reporterbee");case 17:a.prev=17,a.t0=a.catch(2),console.log("[editReporterbee] - error -",a.t0),n(!1);case 21:case"end":return a.stop()}},a,null,[[2,17]])})),function(b){return a.apply(this,arguments)}),M=(b=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(!0),a.prev=1,a.next=4,k().get("/api/v1/reporterbee",{headers:(0,e.Z)({},s.G.AddAccessTokenToHeader,!0)});case 4:if(!0!==(b=a.sent).data.isSuccess){a.next=10;break}return B(b.data.result),F("name",b.data.result.name),n(!1),a.abrupt("return");case 10:throw Error("failed to load reporterbee original data");case 13:a.prev=13,a.t0=a.catch(1),console.log("[loadOriginalData] - error -",a.t0),n(!1);case 17:case"end":return a.stop()}},a,null,[[1,13]])})),function(){return b.apply(this,arguments)}),N=function(){j(!1),r(null),B(null),I(),n(!1)},O=(c=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r(b),j(!0),n(!0),a.next=5,M();case 5:case"end":return a.stop()}},a)})),function(a){return c.apply(this,arguments)});return(0,l.useEffect)(function(){return z.eventManager.on("reporterbee:edit",O),function(){z.eventManager.off("reporterbee:edit",O)}},[]),(0,i.jsx)(y.Z,{title:"Edit Reporter Bee",useClassicContainer:!0,visible:g,modalBox:function(a){return(0,i.jsx)("form",{onSubmit:J(L),children:a})},onClose:N,tools:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.z,{size:"small",children:"Save"})}),children:(0,i.jsxs)("div",{className:"flex flex-col space-y-[15px]",children:[(0,i.jsx)(x.sp,{label:"Image:",children:(0,i.jsx)(w.Qr,{control:E,name:"logo",render:function(a){var b=a.field;return(0,i.jsx)(C.j,{width:"200px",height:"200px",ref:K,onClick:function(){var a;null===(a=K.current)|| void 0===a||a.click()},onChange:function(a){if(null!=a.target.files){var b,c=null===(b=a.target)|| void 0===b?void 0:b.files[0];c&&(F("logo",c),H("logo"))}},image:b.value?URL.createObjectURL(b.value):"/cdn/".concat(null==A?void 0:A.logo)})}})}),(0,i.jsx)(w.Qr,{rules:{required:!0},name:"name",control:E,render:function(a){var b,c=a.field;return(0,i.jsxs)(x.sp,{error:void 0!=G.name,label:"Name:",children:[(0,i.jsx)(x.II,(0,v.Z)((0,u.Z)({},c),{className:"w-full"})),(0,i.jsx)(x.pd,{error:"Required",show:(null===(b=G.name)|| void 0===b?void 0:b.type)=="required"})]})}})]})})},E=D,F=function(){var a,b,c=(0,l.useState)(!1),f=c[0],g=c[1],j=(0,l.useState)(!1),m=j[0],n=j[1],q=(0,l.useState)(null),r=q[0],t=q[1],u=(a=(0,d.Z)(h().mark(function a(b){var c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(!0),a.prev=1,a.next=4,k().get("/api/v1/reporterbee/posts/".concat(b),{headers:(0,e.Z)({},s.G.AddAccessTokenToHeader,!0)});case 4:!0===(c=a.sent).data.isSuccess&&t(c.data.result),n(!1),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),console.log("[loadPost] - error -",a.t0),n(!1);case 13:case"end":return a.stop()}},a,null,[[1,9]])})),function(b){return a.apply(this,arguments)}),v=function(){g(!1),n(!1)},w=(b=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g(!0),a.next=3,u(b);case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},a)})),function(a){return b.apply(this,arguments)});return(0,l.useEffect)(function(){return z.eventManager.on("reporterbee:post:show",w),z.eventManager.on("reporterbee:post:hide",v),function(){z.eventManager.off("reporterbee:post:show",w),z.eventManager.off("reporterbee:post:hide",v)}},[]),(0,i.jsx)(y.Z,{title:"Post",visible:f,useClassicContainer:!0,contentLoading:m||null===r,onClose:v,tools:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.z,{disabled:m,color:"danger",size:"small",children:"delete"})}),children:r&&(0,i.jsxs)("div",{className:"flex flex-col flex-grow space-y-[15px]",children:[(0,i.jsx)("div",{className:"w-full rounded-main/2 overflow-hidden",children:(0,i.jsx)("img",{alt:r.title,className:"w-full",src:"/cdn/".concat(r.image)})}),(0,i.jsxs)("div",{className:"flex items-center space-x-[20px]",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-[5px]",children:[(0,i.jsx)(p.Z,{name:"favorite",size:15}),(0,i.jsx)("span",{className:"inter font-[500] text-[14px]",children:r.likes})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-[5px]",children:[(0,i.jsx)(p.Z,{name:"eye",size:15}),(0,i.jsx)("span",{className:"inter font-[500] text-[14px]",children:r.viewed})]})]}),(0,i.jsx)("h1",{className:"font-[700] text-[18px]",children:r.title}),(0,i.jsx)("p",{className:"font-[400] text-[16px] ",children:r.body})]})})},G=F,H=function(){var a,b=(0,l.useState)(!1),c=b[0],g=b[1],j=(0,l.useState)(!1),u=j[0],v=j[1],w=(0,l.useState)(0),x=w[0],y=w[1],A=(0,l.useState)([]),C=A[0],D=A[1],F=(a=(0,d.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g(!0),a.prev=1,c=!0===b?0:x,a.next=5,k().get("/api/v1/reporterbee/posts",{params:{limit:10,page:c},headers:(0,e.Z)({},s.G.AddAccessTokenToHeader,!0)});case 5:!0===(d=a.sent).data.isSuccess&&(v(d.data.result.length<10),y(c+1),D(!0===b?d.data.result:(0,f.Z)(C).concat((0,f.Z)(d.data.result)))),g(!1),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),console.log("[loadReporterBeePosts] - error -",a.t0),g(!1);case 14:case"end":return a.stop()}},a,null,[[1,10]])})),function(b){return a.apply(this,arguments)});return(0,l.useEffect)(function(){F(!0)},[]),(0,i.jsxs)(q.Z,{children:[(0,i.jsx)(r.V2,{children:(0,i.jsxs)(r.dR,{children:[(0,i.jsx)(r.ZX,{onClick:function(){var a=(0,n.Z)();z.eventManager.emit("reporterbee:edit",a),z.eventManager.once("reporterbee:edit:response:".concat(a),function(a){a&&F(!0)})},color:"outline",children:"Edit Me"}),(0,i.jsx)(r.ZX,{onClick:function(){var a=(0,n.Z)();z.eventManager.emit("reporterbee:add:show",a),z.eventManager.once("reporterbee:add:response:".concat(a),function(a){a&&F(!0)})},icon:"plus",children:"New Post"})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 px-7",children:[c&&(0,i.jsx)("div",{className:"flex absolute w-full h-full z-[10] flex-grow bg-[rgba(255,255,255,0.4)] items-center justify-center py-10",children:(0,i.jsx)(m.Z,{color:t.Colors.primary,width:"70px",loading:c})}),C.map(function(a,b){return(0,i.jsxs)("div",{onClick:function(){z.eventManager.emit("reporterbee:post:show",a._id)},className:"shadow-main cursor-pointer bg-white flex flex-col space-y-5 ha-[18vw] rounded-main pt-5 pb-6 px-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("div",{className:"w-10 h-10 border rounded-full overflow-hidden",children:(0,i.jsx)("img",{alt:a.reporter_bee.name,className:"w-full h-full",src:"/cdn/".concat(a.reporter_bee.logo)})}),(0,i.jsx)("h3",{className:"text-[16px]",children:a.reporter_bee.name})]}),(0,i.jsxs)("div",{className:"flex items-start flex-grow space-x-5",children:[(0,i.jsx)("div",{className:"overflow-hidden w-full rounded-main",children:(0,i.jsx)("img",{alt:a.title,className:"w-full",src:"/cdn/".concat(a.image)})}),(0,i.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,i.jsx)("div",{className:"flex-grow",children:(0,i.jsx)("h2",{className:"font-semibold text-[18px]",children:a.title})}),(0,i.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,i.jsxs)("div",{className:"flex space-x-[6px] items-center",children:[(0,i.jsx)(p.Z,{name:"favorite",size:20}),(0,i.jsx)("span",{className:"inter",children:a.likes})]}),(0,i.jsxs)("div",{className:"flex space-x-[6px] items-center",children:[(0,i.jsx)(p.Z,{name:"eye",size:20}),(0,i.jsx)("span",{className:"inter",children:a.viewed})]})]})]})]})]},"reporter-bee-post-index-".concat(b))}),!c&&!u&&(0,i.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,i.jsx)(o.z,{disabled:c,size:"small",onClick:F,children:"load more"})})]}),(0,i.jsx)(B,{}),(0,i.jsx)(G,{}),(0,i.jsx)(E,{})]})}}},function(a){a.O(0,[536,774,888,179],function(){var b;return a(a.s=99768)}),_N_E=a.O()}])